# AI 会议模式 (Meeting Mode) 功能文档

## 功能概述

AI 会议模式是一个多智能体协作环境，允许用户创建虚拟会议室，配置多个拥有不同人设和能力的 AI 角色进行自动化讨论。用户可以实时干预会议进程，实现自动化的头脑风暴、方案研讨或角色扮演。

## 核心特性

### 1. 会议管理
- ✅ 创建、重命名、删除会议
- ✅ 会议列表视图，展示角色数量和消息数量
- ✅ 持久化存储（使用 storeUtils）
- ✅ 每个会议都有独立的配置和历史记录

### 2. 角色配置
- ✅ 添加/编辑/删除 AI 角色
- ✅ 自定义角色名称、头像（Emoji）、颜色
- ✅ 为每个角色选择不同的 AI 模型
- ✅ 配置角色专属的系统提示词（人设）
- ⏳ MCP 工具集成（框架已就绪）

### 3. 会议室
- ✅ 三栏布局：角色列表 | 聊天区域 | 发言队列
- ✅ 实时聊天，显示所有角色的发言
- ✅ 自动化发言队列管理
- ✅ 拖拽调整发言顺序
- ✅ 插入用户发言或任务节点

### 4. 会议控制
- ✅ 开始/暂停/继续/停止会议
- ✅ 基于队列的自动发言轮换
- ✅ 手动干预：编辑、删除、重新生成消息
- ✅ 用户可随时插入自己到队列
- ✅ 状态指示器（空闲/运行中/暂停/停止）

### 5. AI 集成
- ✅ 流式消息生成（使用后端 `/api/chat`）
- ✅ 上下文管理（全局会议摘要 + 角色提示词）
- ✅ AbortController 支持停止生成
- ✅ 错误处理和恢复机制

## 使用指南

### 1. 创建会议

1. 从导航栏"开始"菜单选择"AI 会议"
2. 点击"创建新会议"按钮
3. 进入会议配置页面

### 2. 配置会议

#### 编辑基本信息
- 点击会议名称旁的编辑按钮修改标题
- 点击"编辑背景"按钮修改会议摘要
- 会议摘要将作为全局上下文提供给所有 AI 角色

#### 添加角色
1. 点击"添加角色"按钮
2. 填写角色信息：
   - **名称**：例如"产品经理"、"技术专家"
   - **头像**：输入 Emoji（如 👨‍💼）
   - **颜色**：选择角色代表色
   - **模型**：选择该角色使用的 AI 模型
   - **角色设定**：描述角色的人设、专业领域、说话风格等
3. 点击"添加"保存角色

### 3. 开始会议

1. 配置完成后，点击"进入会议室"
2. 切换到"会议室"标签页
3. 点击"开始会议"按钮

### 4. 会议进行

#### 自动模式
- 会议开始后，AI 角色会按队列顺序自动发言
- 系统会自动构建上下文（会议摘要 + 历史消息）
- 每个角色会根据其人设和上下文生成回复

#### 手动干预
- **暂停会议**：点击"暂停"按钮停止自动推进
- **编辑消息**：将鼠标悬停在消息上，点击"编辑"按钮
- **删除消息**：点击"删除"按钮移除某条发言
- **重新生成**：点击"重新生成"让 AI 重新回答
- **插入发言**：在暂停状态下输入内容并发送

#### 队列管理
- **拖拽排序**：在右侧队列面板拖动角色调整顺序
- **插入用户**：点击"插入用户发言"在队列中添加自己
- **插入任务**：点击"插入总结任务"添加特殊任务节点

### 5. 停止会议

- 点击"停止"按钮结束会议
- 所有消息历史将被保存
- 可以随时重新开始会议

## 技术架构

### 文件结构

```
src/
├── utils/
│   └── meetingInterface.ts          # TypeScript 类型定义
├── stores/
│   └── meeting.ts                    # Pinia 状态管理
├── pages/
│   ├── meeting.vue                   # 会议列表页面
│   └── meeting/
│       └── [id].vue                  # 会议详情页面
└── components/
    └── meeting/
        ├── MeetingConfig.vue         # 会议配置组件
        ├── MeetingRoom.vue           # 会议室主界面
        ├── MeetingChat.vue           # 聊天区域
        ├── SpeakerQueue.vue          # 发言队列
        └── RoleList.vue              # 角色列表
```

## 待实现功能

1. **MCP 工具集成**：为角色配置特定的 MCP 工具能力
2. **高级任务节点**：实现会议总结、投票决策等任务类型
3. **并发发言**：支持多个角色同时发言
4. **上下文压缩**：自动总结历史以管理长上下文
5. **会议导出**：导出会议记录为 Markdown/PDF
6. **角色模板**：预设常用的角色模板

## 开发者指南

参见源代码注释和现有实现了解详细的技术细节。

## 许可证

参见项目主 LICENSE 文件。
